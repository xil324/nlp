## 智能客服工作台项目

### 技术方案：基于 SBERT 的语义相似度检索系统

采用 Sentence-BERT (SBERT) 作为核心模型。 通过孪生网络结构预训练，将任意长度的句子映射为一个固定维度向量，接通过计算向量间的几何距离来衡量语义相似度。

使用预训练模型BERT 模型（google-bert/bert-base-chinese）。对于输入的每一个句子 $S$，模型输出一个 $d$ 维向量 $\mathbf{v}$。

系统检索时，通过计算用户提问向量 $\mathbf{u}$ 与库中候选向量 $\mathbf{v}$ 的余弦相似度 (Cosine Similarity) 来评估相关性：

$$\text{similarity} = \cos(\theta) = \frac{\mathbf{u} \cdot \mathbf{v}}{\|\mathbf{u}\| \|\mathbf{v}\|}$$

该值越接近 1，表示两个问题的语义越一致。


```mermaid
sequenceDiagram
    autonumber
    participant U as User / Frontend
    participant B as Backend API
    participant MDB as Metadata DB (MySQL)
    participant SBERT as SBERT Model (SentenceTransformer)
    participant VDB as Vector Database

    U->>B: Submit Question (JSON)

    rect rgb(240, 240, 240)
    Note over B, MDB: Metadata Logging
    B->>MDB: Save User ID, Question, Timestamp
    MDB-->>B: Confirm Save (ID)
    end

    rect rgb(230, 245, 255)
    Note over B, SBERT: Embedding Generation
    B->>SBERT: model.encode(question)
    SBERT-->>B: Return Vector (Embedding)
    end

    rect rgb(230, 255, 230)
    Note over B, VDB: Similarity Search
    B->>VDB: Query Top 1 Similarity
    VDB-->>B: Return Metadata ID and Score
    end

    B->>MDB: Fetch Answer Text by ID
    MDB-->>B: Answer Text

    B-->>U: Return Answer + Similarity Score
```
